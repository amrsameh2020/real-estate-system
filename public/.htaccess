# File: public/.htaccess

# ==============================================================================
#                      قواعد إعادة التوجيه (Rewrite Rules)
# ==============================================================================
# هذا الملف هو جزء حيوي جداً للأمان وتنظيم الروابط. يقوم بإعادة توجيه
# جميع الطلبات التي تصل إلى المجلد public إلى ملف index.php، مما يفرض
# نقطة دخول واحدة للتطبيق ويسمح لنا بإنشاء روابط نظيفة (Clean URLs).

<IfModule mod_rewrite.c>
    # تفعيل محرك إعادة الكتابة
    RewriteEngine On

    # تعيين المجلد الأساسي للتطبيق إذا كان يعمل في مجلد فرعي
    # إذا كان مشروعك على الرابط http://localhost/my-project/public/
    # قم بإزالة علامة التعليق وتعديل السطر التالي:
    # RewriteBase /my-project/public/

    # --------------------------------------------------------------------------
    # القاعدة الرئيسية: إعادة توجيه كل شيء إلى index.php
    # --------------------------------------------------------------------------
    # الشرط الأول: لا تقم بإعادة التوجيه إذا كان الطلب لملف موجود فعلياً
    # (مثال: /assets/css/style.css)
    RewriteCond %{REQUEST_FILENAME} !-f

    # الشرط الثاني: لا تقم بإعادة التوجيه إذا كان الطلب لمجلد موجود فعلياً
    RewriteCond %{REQUEST_FILENAME} !-d

    # القاعدة: إذا تحققت الشروط السابقة، قم بأخذ كل ما يأتي في الرابط
    # وضعه كقيمة للمتغير 'url' وارسله إلى index.php
    # ^(.*)$ : تعني "أي شيء"
    # [QSA] : تعني "أضف أي متغيرات query string أخرى كانت موجودة في الرابط الأصلي"
    # [L] : تعني "توقف عن معالجة أي قواعد أخرى بعد هذه القاعدة"
    RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]
</IfModule>

# ==============================================================================
#                          إعدادات أمان إضافية
# ==============================================================================

# منع تصفح المجلدات لمنع أي شخص من رؤية قائمة الملفات داخل أي مجلد
Options -Indexes

# تخصيص صفحات الأخطاء (اختياري)
# يمكنك تفعيل هذا السطر لتوجيه أخطاء 404 إلى الـ router الخاص بك
# ErrorDocument 404 /real-estate-system/public/index.php?url=404
